<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=390, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>KÖNIGIN - Inair</title>
  <link rel="stylesheet" href="/style/index.css">
  <link rel="stylesheet" href="/style/footer.css">
  <style>
:root{
  --safe-top: env(safe-area-inset-top, 0px);
  --safe-bottom: env(safe-area-inset-bottom, 0px);
}

 html, body {
      margin: 0; padding: 0;
      width: 100vw;
      height: 100vh;
      background: #191919;
      overflow: hidden;
    }
    .app-frame {
      width: 100vw;
      height: 100vh;
      max-width: 100vw;
      max-height: 100vh;
      position: relative;
      margin: 0;
      border-radius: 0;
      overflow: hidden;
      box-shadow: none;
      background: #191919;
      padding-top: env(safe-area-inset-top, 0px);
      padding-bottom: env(safe-area-inset-bottom, 0px);

      /* 完全填充屏幕 */
      top: 0; left: 0; right: 0; bottom: 0;
      box-sizing: border-box;
    }
    
    .inair-bg {
      position: absolute;
      left: 0; top: 0;
      width: 100%;
      height: 100%;
      background: url('../../img/master/master_bg.png') center center/cover no-repeat;
      z-index: 1;
    }
    
    .inair-title {
      position: absolute;
      top: -3%; left: 50%;
      transform: translateX(-50%);
      width: 750px; height: 300px;
      background: url('../../img/master/inair.png') center center/contain no-repeat;
      z-index: 2;
      pointer-events: none;
    }
    
    .bottom-mask {
      position: absolute;
      left: 0; bottom: 0;
      width: 100%;
      height: 92px;
      background: #191919;
      border-bottom-left-radius: 0;
      border-bottom-right-radius: 0;
      z-index: 3;
      pointer-events: none;
    }
    
    /* 圆形闪动按钮 */
    .nav-circle-btn {
      position: absolute;
      z-index: 10;
      display: block;
    }
    
    .btn-bed {
      top: 65%;  /* 与背景床的位置对齐 */
      left: 50%;
      transform: translateX(-50%);
    }
    
    .nav-circle-btn img {
      width: 6vw;
      height: 6vw;
      min-width: 48px;
      min-height: 48px;
      max-width: 80px;
      max-height: 80px;
      display: block;
      pointer-events: auto;
    }
    
    .nav-circle-btn:active img {
      filter: brightness(0.8);
      transform: scale(0.92);
    }
    
    @keyframes btn-blink {
      0%   { opacity: 1; filter: drop-shadow(0 0 0px #fff6) brightness(1); }
      40%  { opacity: 0.6; filter: drop-shadow(0 0 8px #e6f3ff) brightness(1.3);}
      60%  { opacity: 1; filter: drop-shadow(0 0 16px #b5e2ff) brightness(1.5);}
      100% { opacity: 1; filter: drop-shadow(0 0 0px #fff6) brightness(1); }
    }
    
    .nav-circle-btn.blink img {
      animation: btn-blink 1.2s infinite;
      animation-timing-function: ease-in-out;
    }
    
    /* 客单滚轮选项区域 */
    .guest-list-wrapper{
      position: absolute;
      left: 53%;
      transform: translateX(-50%);
      width: 180px;
      top: 22%;
      height: 240px;
      z-index: 2;
      display: flex;
      align-items: stretch;
      gap: 12px;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease, visibility 0.3s ease;
    }
    
    .guest-list-wrapper.show {
      opacity: 1;
      visibility: visible;
    }
    
    .guest-list{
      position: relative;
      flex: 1 1 auto;
      height: 100%;
      overflow: hidden;
      -webkit-mask-image: linear-gradient(to bottom, rgba(0,0,0,0) 0, rgba(0,0,0,1) 36px, rgba(0,0,0,1) calc(100% - 36px), rgba(0,0,0,0) 100%);
      mask-image: linear-gradient(to bottom, rgba(0,0,0,0) 0, rgba(0,0,0,1) 36px, rgba(0,0,0,1) calc(100% - 36px), rgba(0,0,0,0) 100%);
    }
    
    .guest-list-viewport{
      height: 288px;
      overflow-y: auto;
      padding-right: 8px;
      scrollbar-width: none;
    }
    
    .guest-list-viewport::-webkit-scrollbar{ display: none; }
    
    .guest-item{
      height: 48px;
      margin: 16px 0;
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #fff;
      font-size: 15px;
      font-family: "SimSun", "宋体", serif; /* 改为宋体 */
      letter-spacing: .5px;
      user-select: none;
      pointer-events: auto; /* 改为可点击 */
      cursor: pointer; /* 添加鼠标指针 */
      background: linear-gradient(180deg, #5a5a5a 0%, #4a4a4a 45%, #414141 100%);
      border: 1px solid #696969;
      border-radius: 14px;
      box-shadow: inset 0 1px 0 rgba(255,255,255,.12), inset 0 -2px 4px rgba(0,0,0,.35), 0 2px 10px rgba(0,0,0,.25);
      transition: all 0.2s ease; /* 添加过渡效果 */
    }
    
    .guest-item:hover {
      background: linear-gradient(180deg, #6a6a6a 0%, #5a5a5a 45%, #515151 100%);
      transform: scale(1.02);
    }
    
    .guest-item:active {
      transform: scale(0.98);
    }
    
    /* 右侧自定义滚动条 */
    .guest-scrollbar{
      position: relative;
      width: 14px;
      height: 100%;
    }
    
    .guest-scrollbar .track{
      position: absolute; inset: 0;
      background: url('../svg/private/scroll options.svg') center / 100% 100% no-repeat;
      opacity: .9;
    }
    
    .guest-scrollbar .thumb{
      position: absolute; left: 0; right: 0;
      height: 40px;
      background: url('../svg/private/single opition.svg') center center/contain no-repeat;
    }
  </style>
</head>
<body>
  <div class="app-frame">
    <div class="inair-bg"></div>
    <div class="inair-title"></div>
    
    <!-- 床位置的圆形闪动按钮 -->
    <a href="#" class="nav-circle-btn btn-bed blink" title="Bed Interaction">
      <img src="../svg/2nd floor button.svg" alt="Bed Button"/>
    </a>
    
    <!-- 客单滚轮选项（默认隐藏） -->
    <div class="guest-list-wrapper" id="guestList">
      <div class="guest-list">
        <div class="guest-list-viewport" id="guestViewport">
          <div class="guest-item" data-article="domestication.html">驯化</div>
          <div class="guest-item" data-article="moscow.html">莫斯科变态坏房东</div>
          <div class="guest-item" data-article="berlin.html">柏林无圣徒</div>
          <div class="guest-item" data-article="abyss.html">深渊漫步</div>
          <div class="guest-item" data-article="monroe.html">梦露小姐</div>
        </div>
      </div>
      <div class="guest-scrollbar" id="guestScrollbar">
        <div class="track"></div>
        <div class="thumb" id="guestThumb"></div>
      </div>
    </div>
    
    <div class="bottom-mask"></div>
  </div>

  <!-- Footer自动插入点 -->
  <div id="footer-placeholder"></div>
<script src="../js/footer.js"></script>
<script>
// 确保footer正确加载
document.addEventListener('DOMContentLoaded', function() {
  console.log('Inair page loaded');
  // 检查footer是否加载
  setTimeout(() => {
    const footer = document.querySelector('.bottom-nav');
    if (footer) {
      console.log('Footer loaded successfully');
    } else {
      console.log('Footer not found, checking placeholder');
      const placeholder = document.getElementById('footer-placeholder');
      console.log('Footer placeholder:', placeholder);
    }
  }, 1000);
  
  // 床按钮点击事件
  const bedBtn = document.querySelector('.btn-bed');
  const guestList = document.getElementById('guestList');
  let isGuestListVisible = false;
  
  if (bedBtn) {
    bedBtn.addEventListener('click', function(e) {
      e.preventDefault();
      console.log('Bed button clicked');
      
      // 切换滚轮选项的显示/隐藏
      if (isGuestListVisible) {
        guestList.classList.remove('show');
        isGuestListVisible = false;
      } else {
        guestList.classList.add('show');
        isGuestListVisible = true;
      }
    });
  }
  
  // 自定义滚动条与滚轮同步
  const viewport = document.getElementById('guestViewport');
  const thumb = document.getElementById('guestThumb');
  const scrollbar = document.getElementById('guestScrollbar');
  
  if(viewport && thumb && scrollbar) {
    function updateThumb(){
      const viewH = viewport.clientHeight;
      const scrollH = viewport.scrollHeight;
      const trackH = scrollbar.clientHeight;
      const minThumb = 24;
      const thumbH = Math.max(minThumb, Math.round(viewH * viewH / Math.max(scrollH, 1)));
      const maxTop = Math.max(trackH - thumbH, 0);
      const top = (viewport.scrollTop / Math.max(scrollH - viewH, 1)) * maxTop;
      thumb.style.height = thumbH + 'px';
      thumb.style.top = top + 'px';
    }

    // 监听滚动和尺寸变化
    viewport.addEventListener('scroll', updateThumb, { passive: true });
    window.addEventListener('resize', updateThumb);
    // 初始化
    updateThumb();
  }
  
  // 滚轮选项点击跳转
  const guestItems = document.querySelectorAll('.guest-item');
  guestItems.forEach(item => {
    item.addEventListener('click', function() {
      const articleFile = this.getAttribute('data-article');
      if (articleFile) {
        console.log('Jumping to article:', articleFile);
        if (articleFile === 'domestication.html') {
          window.location.href = `../../article/domestication/catalog.html`;
        } else {
          window.location.href = `../../article/${articleFile}`;
        }
      }
    });
  });
});
</script>
</body>
</html>
